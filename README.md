# CHTL编译器

## 项目简介

CHTL编译器是一个基于C++14标准实现的超文本语言编译器，严格按照CHTL语法文档实现，支持将CHTL代码编译为标准HTML代码。

## 技术特色

### 🌟 核心特性
- **双处理机制**: Basic机制处理标准语法，Config机制支持自定义关键字
- **状态机驱动**: 使用多层状态机实现精确的词法分析
- **上下文推导**: 智能识别同一标识符在不同上下文中的含义
- **配置驱动**: 支持ASCII范围内任意字符组合的自定义关键字
- **模块化设计**: 高内聚低耦合，便于扩展和维护

### 🔧 技术实现
- **编程语言**: C++14标准
- **构建系统**: GNU Make
- **测试框架**: 自制测试框架，全面覆盖
- **错误处理**: 完善的错误检测和恢复机制
- **性能优化**: 高效的内存管理和算法实现

## 项目结构

```
CHTL编译器/
├── src/                    # 源代码目录
│   ├── common/            # 通用工具和基础类
│   │   ├── Token.h/.cpp   # Token定义和工具
│   │   └── Context.h/.cpp # 上下文管理和状态机
│   ├── lexer/             # 词法分析器
│   │   ├── BasicLexer.h/.cpp    # 基础词法分析器
│   │   └── ConfigLexer.h        # 配置词法分析器
│   ├── node/              # AST节点类
│   ├── loader/            # 文件加载器
│   ├── module/            # 模块和导入系统
│   ├── generator/         # HTML生成器
│   ├── predefine/         # 预定义元素、样式、变量
│   └── parser/            # 语法分析器
├── test/                  # 测试套件
│   ├── BasicLexerTest.cpp # 词法分析器测试
│   └── sample_chtl_files/ # 示例CHTL文件
├── main.cpp               # 编译器主程序
├── Makefile              # 构建配置
└── README.md             # 项目说明
```

## 快速开始

### 编译项目

```bash
# 编译整个项目
make

# 清理并重新编译
make clean && make

# 查看项目信息
make info
```

### 运行测试

```bash
# 运行所有测试
make test

# 运行词法分析器测试
make test-lexer
```

### 使用编译器

```bash
# 编译CHTL文件
./bin/chtl_compiler input.chtl

# 仅进行词法分析
./bin/chtl_compiler -t input.chtl

# 启用调试模式
./bin/chtl_compiler -d input.chtl

# 指定输出文件
./bin/chtl_compiler -o output.html input.chtl

# 查看帮助
./bin/chtl_compiler -h
```

## CHTL语法支持

### ✅ 已支持语法

#### 基础语法
- HTML标签（所有HTML5标签）
- 文本节点（`text { }`）
- 属性定义（`属性名: "属性值";`）
- 三种字符串格式（双引号、单引号、无引号）
- 三种注释格式（`//`、`/* */`、`--`）

#### 样式系统
- 局部样式块（`style { }`）
- CSS选择器（类选择器、ID选择器）
- 伪类和伪元素（`:hover`、`::before`等）
- 增强伪类语法（`&:hover`、`&::after`）

#### 关键字系统
- 基础关键字（`text`、`style`）
- 修饰符关键字（`[Custom]`、`[Template]`、`[Origin]`等）
- 操作符关键字（`add`、`delete`、`inherit`等）
- @关键字（`@Style`、`@Element`、`@Var`）

### 🚧 开发中功能
- 自定义样式组和元素
- 变量组系统
- 模板系统
- 配置组和自定义关键字
- 导入和命名空间
- HTML代码生成

## 测试结果

### 词法分析器测试
- **测试用例**: 50个
- **通过率**: 94% (47/50)
- **覆盖范围**: 所有基础语法元素

### 示例文件测试
- **文件大小**: 78行CHTL代码
- **Token数量**: 100个Token全部正确识别
- **解析成功率**: 100%

## 开发规范

### 代码质量
- 严格遵循C++14标准
- 完整的错误处理机制
- 详细的代码注释
- 统一的代码风格

### 测试要求
- 每个类都有对应的测试类
- 自动化测试流程
- 典型用例全覆盖
- 边界条件测试

### 性能要求
- 高效的状态机实现
- 优化的内存管理
- 快速的Token识别
- 低延迟的错误恢复

## 贡献指南

1. Fork项目
2. 创建功能分支
3. 实现功能并添加测试
4. 确保所有测试通过
5. 提交Pull Request

## 许可证

本项目使用MIT开源协议。

## 联系方式

如有问题或建议，请通过Issue与我们联系。

---

**注意**: 本项目严格按照CHTL语法文档实现，确保100%语法兼容性。