# CHTL编译器开发进度汇报 - 001

## 项目初始化
- 时间：2024年
- 阶段：项目架构设计与初始化

## CHTL语法理解
已完整阅读CHTL语法文档，主要特性包括：

### 基础语法
1. **注释系统**：
   - `//` 单行注释（不生成到HTML）
   - `/* */` 多行注释（不生成到HTML）
   - `--` 生成器识别注释（会生成到HTML）

2. **文本节点**：`text { "内容" }`

3. **元素节点**：支持所有HTML元素

4. **属性语法**：`属性名: "属性值";` 或 `属性名 = "属性值";`

### 高级特性
1. **局部样式块**：在元素内部使用 `style {}` 定义样式
2. **样式组**：`@Style` 预定义样式组合
3. **自定义系统**：
   - `[Custom] @Style` 自定义样式组
   - `[Custom] @Element` 自定义元素
   - `[Custom] @Var` 自定义变量组
4. **模板系统**：`[Template]` 创建不可修改的模板
5. **特例化机制**：支持 `add`、`delete` 操作符
6. **导入系统**：`[Import]` 支持模块化
7. **命名空间**：`[Namespace]` 防止命名冲突
8. **配置系统**：`[Configuration]` 自定义编译器行为
9. **原始嵌入**：`[Origin]` 直接嵌入原生代码
10. **期盼机制**：`expect` 和 `not expect` 约束内容

## 架构设计

### 目录结构
```
/src
  /common      - 通用工具和基础类
  /lexer       - 词法分析器
  /node        - AST节点定义
  /loader      - 文件加载器
  /module      - 模块管理（导入系统）
  /generator   - HTML生成器
  /predefine   - 预定义元素/样式/变量
  /parser      - 语法分析器

/test         - 测试套件
```

### 核心组件设计

#### 1. Token系统
需要支持的Token类型：
- 标识符、字符串、数字
- 操作符：`add`、`delete`、`from`、`as`、`inherit`
- 特殊符号：`{}`、`[]`、`()`、`;`、`:`、`=`、`.`
- 关键字：`text`、`style`、`expect`、`not`
- 配置关键字：`[Custom]`、`[Template]`、`[Origin]`、`[Import]`、`[Namespace]`、`[Configuration]`

#### 2. Lexer设计
- **BasicLexer**：处理基础语法
- **ConfigLexer**：处理配置驱动的自定义关键字
- 使用状态机和上下文推导实现复杂的Token识别

#### 3. Parser设计
- **BasicParser**：解析基础语法
- **ConfigParser**：解析配置驱动的语法
- 生成完整的AST树

#### 4. Generator设计
- 精准生成HTML代码
- 处理样式提升（局部样式到全局）
- 处理变量组转换

## 下一步计划
1. 创建基础项目结构
2. 实现Token定义和枚举映射
3. 开始实现BasicLexer的状态机
4. 创建基础测试框架

## 技术要点
- C++14标准
- 最小化外部依赖
- 使用枚举和映射表管理关键字
- 状态机驱动的词法分析
- 上下文感知的语法解析